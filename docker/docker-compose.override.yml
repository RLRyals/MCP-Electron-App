version: '3.8'

# Docker Compose Override for MCP Writing System
# This override adds support for the TypingMind recommended mcp-config.json approach
# It mounts a custom entrypoint script and the generated config file

services:
  mcp-writing-system:
    # Override the entrypoint to use our custom script with config file support
    entrypoint: ["/custom-entrypoint.sh"]

    volumes:
      # Mount the custom entrypoint script
      # This script will be provided by the Electron app
      - ${CUSTOM_ENTRYPOINT_PATH:-./connector-entrypoint.sh}:/custom-entrypoint.sh:ro

      # Mount the generated mcp-config.json file
      # This file is generated by the Electron app based on discovered MCP servers
      - ${MCP_CONFIG_PATH:-./mcp-config.json}:/app/mcp-config.json:ro

    # Ensure the entrypoint script is executable
    # Note: The script should already have execute permissions when mounted
